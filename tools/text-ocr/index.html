<html>  
<head>  
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />  
<title>在线文字识别 - www.zerofc.cn</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
	body {
		font-family: Arial, sans-serif;
	}
	#imgBox {
		display: none;
	}
	#imagePreview {
		margin-top: 20px;
		max-width: 50%;
		height: auto;
	}
	#output {
		width: 100%;
		height: 200px;
		margin-top: 20px;
	}
	#loading {
		display: none;
		margin-top: 20px;
		font-size: 18px;
	}
	#loading.active {
		display: block;
	}
</style>
</head>  

<body>
    <h4>文字识别工具</h4>
    <input type="file" id="imageUpload" accept="image/*">
    <div id="loading">正在识别文字，请稍等...</div>
    <div id="imgBox"><img id="imagePreview" src="" alt="Image Preview" /></div>
    <textarea id="output" readonly></textarea>
    <script src="tesseract.min.js"></script>
	
    <script>
        const imageUpload = document.getElementById('imageUpload');
        const imagePreview = document.getElementById('imagePreview');
        const output = document.getElementById('output');
        const loading = document.getElementById('loading');

        imageUpload.addEventListener('change', (event) => {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (e) => {
					document.getElementById("imgBox").style.display = "block";
                    imagePreview.src = e.target.result;
                    loading.classList.add('active');

                    Tesseract.recognize(
                        e.target.result,
                        'chi_sim', 
                        {
                            logger: m => console.log(m) // 可以输出识别进度
                        }
                    ).then(({ data: { text } }) => {
                        output.value = text;
                        console.log(text);
                        loading.classList.remove('active');
                    });
                };
                reader.readAsDataURL(file);
            }
        });
    </script>
	
</body>

</html>  
